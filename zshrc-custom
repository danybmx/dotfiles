YESTERDAY=$(gdate -d "-2 days" '+%Y-%m-%d')
TODAY=$(gdate -d 'yesterday' '+%Y-%m-%d')
TOMORROW=$(gdate '+%Y-%m-%d')
[ $(date "+%H%M") -gt 600 ] && {
  YESTERDAY=$(gdate -d "yesterday" '+%Y-%m-%d')
  TODAY=$(gdate '+%Y-%m-%d')
  TOMORROW=$(gdate -d '+1 day' '+%Y-%m-%d')
}

export NOTES_DIR=$HOME/Documents/worklog/notes
alias yesterday="vim ~/Documents/worklog/$YESTERDAY.md"
alias tomorrow="vim ~/Documents/worklog/$TOMORROW.md"
alias daily="vim ~/Documents/worklog/$TODAY.md"
alias hours="vim ~/Documents/worklog/hours.md"

function notes() {
  vim $NOTES_DIR/$1.md
}

# Define the autocomplete function
_notes_autocomplete() {
  local -a files
  local cur_word

  # Current word being completed
  cur_word=${COMP_WORDS[COMP_CWORD]}

  # List of .md files without the .md extension
  files=(${(f)"$(ls $NOTES_DIR/*.md 2> /dev/null)"})

  # Strip directory and extension from filenames
  files=(${files##*/})
  files=(${files%.md})

  # Provide completion suggestions
  compadd $files
}

# Register the autocomplete function for the notes command
compdef _notes_autocomplete notes
